{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport MapGL, { Marker, NavigationControl, Popup } from \"react-map-gl\";\nimport CityInfo from \"../demos/map/city-info\";\nimport CityPin from \"../demos/map/city-pin\";\nimport Head from \"next/head\";\nimport fetch from \"../lib/fetch\";\nimport useSWR from \"swr\";\nimport { useState } from \"react\";\n\nvar MapMarkers = function MapMarkers() {\n  var _useSWR = useSWR(\"\".concat(process.env.baseUrl, \"api/cities\"), fetch),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  var _useState = useState({\n    latitude: 37.785164,\n    longitude: -100,\n    zoom: 3.5,\n    bearing: 0,\n    pitch: 0\n  }),\n      viewport = _useState[0],\n      setViewport = _useState[1];\n\n  var _useState2 = useState(null),\n      popupInfo = _useState2[0],\n      setPopupInfo = _useState2[1];\n\n  var _updateViewport = function _updateViewport(viewport) {\n    setViewport(viewport);\n  };\n\n  var _renderCityMarker = function _renderCityMarker(city, index) {\n    return __jsx(Marker, {\n      key: \"marker-\".concat(index),\n      longitude: city.longitude,\n      latitude: city.latitude\n    }, __jsx(CityPin, {\n      size: 20,\n      onClick: function onClick() {\n        return setPopupInfo(city);\n      }\n    }));\n  };\n\n  var _renderPopup = function _renderPopup() {\n    return popupInfo && __jsx(Popup, {\n      tipSize: 5,\n      anchor: \"top\",\n      longitude: popupInfo.longitude,\n      latitude: popupInfo.latitude,\n      onClose: function onClose() {\n        return setPopupInfo(null);\n      }\n    }, __jsx(CityInfo, {\n      info: popupInfo\n    }));\n  };\n\n  if (error) return __jsx(\"div\", null, \"Failed to load media data\");\n  if (!data) return __jsx(\"div\", null, \"Loading...\");\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"link\", {\n    href: \"https://api.tiles.mapbox.com/mapbox-gl-js/v1.6.0/mapbox-gl.css\",\n    rel: \"stylesheet\"\n  })), __jsx(MapGL, _extends({}, viewport, {\n    width: \"100%\",\n    height: \"100%\",\n    mapStyle: \"mapbox://styles/mapbox/dark-v9\",\n    onViewportChange: _updateViewport,\n    mapboxApiAccessToken: process.env.mapBoxApi,\n    style: {\n      position: \"absolute\",\n      top: \"0px\",\n      left: \"0px\",\n      right: \"0px\",\n      bottom: \"0px\",\n      overflow: \"hidden\",\n      flex: \"1 1 auto\",\n      flexDirection: \"row\",\n      display: \"flex\"\n    }\n  }), data.map(_renderCityMarker), _renderPopup(), __jsx(NavigationControl, {\n    onViewportChange: _updateViewport\n  })));\n};\n\nexport default MapMarkers;","map":null,"metadata":{},"sourceType":"module"}